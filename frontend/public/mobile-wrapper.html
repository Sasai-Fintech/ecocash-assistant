<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Eco Assist Mobile Wrapper</title>
    <style>
      body {
        font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
        background: #050a13;
        color: #f5f6f8;
        margin: 0;
        padding: 2rem;
        display: flex;
        gap: 2rem;
        min-height: 100vh;
        box-sizing: border-box;
      }
      .panel {
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 16px;
        padding: 1.5rem;
        width: 320px;
        box-sizing: border-box;
      }
      label {
        display: block;
        font-size: 0.85rem;
        margin-bottom: 0.5rem;
        color: rgba(255, 255, 255, 0.7);
      }
      textarea,
      input {
        width: 100%;
        background: rgba(255, 255, 255, 0.06);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 12px;
        padding: 0.75rem;
        color: #fff;
        margin-bottom: 1rem;
        box-sizing: border-box;
      }
      button {
        width: 100%;
        border: none;
        border-radius: 999px;
        padding: 0.75rem;
        font-weight: 600;
        background: #0a84ff;
        color: white;
        cursor: pointer;
      }
      iframe {
        flex: 1;
        height: calc(100vh - 4rem);
        border-radius: 24px;
        border: 1px solid rgba(255, 255, 255, 0.1);
        box-shadow: 0 30px 80px rgba(0, 0, 0, 0.45);
        background: #0b1524;
      }
    </style>
  </head>
  <body>
    <div class="panel">
      <h2>EcoCash Mobile Shell</h2>
      <p style="font-size: 0.9rem; color: rgba(255, 255, 255, 0.6);">
        Enter a mobile JWT and optional metadata to simulate how the EcoCash app launches the chat widget.
      </p>
      <label for="token">Mobile JWT</label>
      <textarea id="token" rows="5" placeholder="Paste Bearer JWT here"></textarea>

      <label for="metadata">Metadata (JSON)</label>
      <textarea id="metadata" rows="4" placeholder='{"channel":"demo"}'></textarea>

      <label for="params">Query Params</label>
      <input id="params" type="text" placeholder="token=...&metadata=..." disabled />

      <button id="launch">Launch Chat</button>
    </div>
    <iframe id="widget" title="Eco Assist" src="/"></iframe>

    <script>
      const tokenField = document.getElementById("token");
      const metadataField = document.getElementById("metadata");
      const paramsField = document.getElementById("params");
      const launchButton = document.getElementById("launch");
      const iframe = document.getElementById("widget");
      const defaultToken =
        "eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICI3MWVCRE5vN3JrNkZFZEtmN0FBQVRyUWZfMkJRNFhfUFA0OC1OTzhtRmgwIn0.eyJleHAiOjE3NjI5MjgxMDgsImlhdCI6MTc2MjkyNzIwOCwianRpIjoiNDVhZmE4ZDMtNmFlNi00YTczLWI4NjMtNDNhN2U1NTIyMjkzIiwiaXNzIjoiaHR0cHM6Ly9hdXRoLnNhc2FpcGF5bWVudGdhdGV3YXkuY29tL3JlYWxtcy9zYXNhaSIsImF1ZCI6WyJzYXNhaS1hcGktY2xpZW50IiwiYWNjb3VudCJdLCJzdWIiOiI5MjI5ZmMyNS0xOTU2LTQ3OTAtYWNhMy1kODM0NWUyYTM5YWMiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJzYXNhaS1wYXktY2xpZW50Iiwic2lkIjoiMWU1MWFkYWQtZDg3NS00YjdlLWE1YWUtOGFjZTU4M2UzYWYzIiwiYWNyIjoiMSIsImFsbG93ZWQtb3JpZ2lucyI6WyJodHRwczovL2Rldi5zYXNhaXBheW1lbnRnYXRld2F5LmNvbSIsImh0dHBzOi8vc2FuZGJveC5zYXNhaXBheW1lbnRnYXRld2F5LmNvbSIsImh0dHBzOi8vc3RhZ2luZy5zYXNhaXBheW1lbnRnYXRld2F5LmNvbSIsImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMCJdLCJyZWFsbV9hY2Nlc3MiOnsicm9sZXMiOlsib2ZmbGluZV9hY2Nlc3MiLCJ1bWFfYXV0aG9yaXphdGlvbiIsImRlZmF1bHQtcm9sZXMtc2FzYWkiLCJzYXNhaS1wYXktZ3Vlc3QiXX0sInNjb3BlIjoib3BlbmlkIHByb2ZpbGUgZW1haWwiLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwibmFtZSI6IlNhc2FpUGF5R3Vlc3RVc2VyIiwidGVuYW50SWQiOiJzYXNhaSIsIm1pZCI6IjY3NDJmNmM1LTU0YTQtNGYyNy1hMjAxLTFkZjg4MzAzNTk0MyIsInByZWZlcnJlZF91c2VybmFtZSI6IjE0NWM0NzhhLTk3ZDktNGYyOS05MjcwLWMyOWIyNTY5NGZlNCIsImdpdmVuX25hbWUiOiJTYXNhaVBheUd1ZXN0VXNlciIsImVtYWlsIjoicWp3ZXl0aHZrYkBkdW1teS5jb20ifQ.WBehzKR7cNGyzTJUu6j1FkvrnNHk8FNlKGt06-np8QC3yWUnaKtWmQoCvR3KasHaQs0DV8-YXgMIgT_ZCfOlJZayWlTbLuX9FZczFv_D2xi2hhV7xfEcqVpA6jfrURcaLmcC-371KogQskj51KXUtBTzIZuLQpdjoLITAPH7L5xDHPTnb80suxX-dRnoDUlEpcWE3APLhkyCYDxy1zKfhbxT10Gk6riq3v0VNiyWLIu4dl3L3W-aQBK_rNB0X-ECYTELy47htXMuktzOzysN4evDgiYFvCqhQa_CJMzT6cYBV0uIm-QE9OXFfNJAjQPei7V18eUKq-H23yNzc452Pg";

      function updateParams() {
        const token = tokenField.value.trim();
        const metadata = metadataField.value.trim();
        const params = new URLSearchParams();
        if (token) {
          params.set("token", encodeURIComponent(token));
        }
        if (metadata) {
          params.set("metadata", encodeURIComponent(metadata));
        }
        paramsField.value = params.toString();
        return params.toString();
      }

      tokenField.value = defaultToken;
      metadataField.value = '{"channel":"demo"}';
      updateParams();

      tokenField.addEventListener("input", updateParams);
      metadataField.addEventListener("input", updateParams);

      launchButton.addEventListener("click", () => {
        const query = updateParams();
        if (!tokenField.value.trim()) {
          alert("Please paste a mobile JWT token.");
          return;
        }
        iframe.src = query ? `/?${query}` : "/";
      });
    </script>
  </body>
</html>

